<body>
    <div id="vue-app" v-cloak>
        <h1>Harvest Report</h1>
        <p>This page is a <i>mockup</i> of a simplified harvest report</p>
        <label for="title">Title:</label>
        <input type="text" id="title" name="title" v-model="reportTitle"><br><br>

        <label for="startDate">Start:</label>
        <input type="date" id="startDate" name="startDate"  v-model="reportStartDate" :max="reportEndDate">
        <label for="endDate">End:</label>
        <input type="date" id="endDate" name="endDate" v-model="reportEndDate" :min="reportStartDate"><br><br>

        <label for="crop">Crop:</label>
        <select id="crop" name="crop" v-model="reportCrop">
            <option v-for="crop in cropOptions" :value="crop">{{ crop }}</option>
        </select>

        <label for="area">Area:</label>
        <select id="area" name="area" v-model="reportArea">
            <option v-for="area in areaOptions">{{ area }}</option>
        </select>
        <br><br>
        <button type="button" @click="addHarvestEntry">Generate Report</button>
        <hr>
        <h1>{{ reportTitle ? reportTitle : 'Mock Harvest Report' }}</h1>
        <p>Details</p>
        <ul>
            <li><strong>Farm:</strong>Sample Farm</li>
            <li><strong>User:</strong>manager1</li>
            <li><strong>Language:</strong>English</li>
            <br>
            <li><strong>Start:</strong>{{ reportStartDate }}</li>
            <li><strong>End:</strong>{{ reportEndDate }}</li>
            <li><strong>Crop:</strong>{{ reportCrop }}</li>
            <li><strong>Area:</strong>{{ reportArea }}</li>
        </ul>

        <!-- Conditional Table Display -->
        <div v-if="harvestEntries.length > 0">
            <table border="1">
                <thead>
                    <tr>
                        <th>Row</th>
                        <th>Date</th>
                        <th>Area</th>
                        <th>Crop</th>
                        <th>Yield</th>
                        <th>Units</th>
                    </tr>
                </thead>
                <tbody>
                    <tr v-for="(entry, index) in harvestEntries">
                        <td>{{ index + 1 }}</td>
                        <td>{{ entry.date }}</td>
                        <td>{{ entry.area }}</td>
                        <td>{{ entry.crop }}</td>
                        <td>{{ entry.yield }}</td>
                        <td>{{ entry.units }}</td>
                    </tr>
                </tbody>
            </table>
        </div>
        <p v-else>No matching records.</p> <!-- Message when no entries -->

    </div>

    <script>
        const vueApp = new Vue({
            el: '#vue-app',
            data: {
                reportTitle: '',
                reportStartDate: '2020-05-05',
                reportEndDate: '2020-05-15',
                reportCrop: 'Kale',
                reportArea: 'All',
                harvestEntries: [], // Initialize as an empty array
                names: ["Joe", "Arun", "Ouwen", "Anh", "Sue"],
                cropOptions: ['Broccoli', 'Kale', 'Peas'],
                areaOptions: ['Chuau-1', 'All', 'SQ7']
            },
            methods: {
                addHarvestEntry() {
                    this.harvestEntries.push({
                        date: "2018-05-01",
                        area: "Orion-3",
                        crop: "Kale",
                        yield: 12,
                        units: "Bunches"
                    });
                }
            }
        });
        Vue.config.devtools = true;
    </script>
</body>